<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <title>Login</title>
</head>
<body style=" background-color:azure">
    <div style="
    background-color:ghostwhite;
    color:black;
    font-family:'Times New Roman';
    font-size:15px;
    text-align: center">
      
        <br>
        <div>
            <span id="log">Login</span>

        </div>
        <div>
            <input id="loginInput" type="text"></input>
        </div>
        <div>
            <span id="ps">Password</span>
        </div>
        <div>
            <input id="passwordInput" type="password"></input>
        </div>
        <button onclick="BackClick()">Back</button>
        <button id="lb" onclick="OnLoginClick()">Login</button>
        <button id="recovery" onclick="OnRecoveryClick()">Forgot login/password</button>

    </div>
    <script>
        var btn = document.getElementById("lb");
        
        async function OnLoginClick() {
            var login = document.getElementById("loginInput").value
            var password = document.getElementById("passwordInput").value
            if (login == "") {
                alert("Login input must be filled!");
            }
            else if (password == "") {
                alert("Password input must be filled!");
            }
            else{
                var response = await fetch("/regCheck",
                {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ emailString: null, loginString: login, passwordString: password })
                });
                IsRegistered = JSON.parse(await response.text())
                if (IsRegistered == false) {
                    alert("Error incorrect email or password.")
                }
                else {
                    await fetch("/login", {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'

                        },
                        body: JSON.stringify({ loginString: login, passwordString: password })
                    });
                    window.location = '/mainPage'
                }
            }
            
        }
    </script>
    <script>
        function BackClick() {
            window.location = '/'
        }

    </script>

    <script>
        
        async function OnRecoveryClick() {
                    
                window.location = '/recoveryPage'
           
        }

    </script>
</body>

</html>